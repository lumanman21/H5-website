!(function (t) {
  t.fn.imgzoom = function (o) {
    console.log(this);
    var e = this,
      i = t(this).find("img").eq(0),
      s = {
        position: "inner",
        boxWidth: "200px",
        boxHeight: "200px",
        borderRadius: "0px",
        left: "5",
        top: "5",
      };
    o && t.extend(!0, s, o);
    t(this).hover(
      function () {
        if ("inner" !== s.position) {
          var o = t("<div class='imgzoombox'></div>"),
            n = t("<div class='imgzoombox1'></div>"),
            l = i.attr("src"),
            r = t("<img src=" + l + " style='position:absolute' />"),
            f = t(e).outerWidth(),
            p = t(e).outerHeight(),
            h = { left: 0, top: 0 };
          "right" === s.position
            ? ((h.left = t(e).offset().left + f + parseFloat(s.left)),
              (h.top = t(e).offset().top + parseFloat(s.top)))
            : "top" === s.position
            ? ((h.left = t(e).offset().left),
              (h.top = -(t(e).offset().top + parseFloat(s.top) + p)))
            : "left" === s.position
            ? (console.log(),
              (h.left = -(t(e).offset().left + f + parseFloat(s.left))),
              (h.top = t(e).offset().top + parseFloat(s.top)))
            : "bottom" === s.position &&
              ((h.left = t(e).offset().left),
              (h.top = t(e).offset().top + parseFloat(s.top) + p)),
            console.log(h.left),
            n.css(h),
            n.append(r),
            t(e).append(o),
            t(e).after(n);
        } else {
          (o = t("<div class='magnify_box'></div>")),
            (l = i.attr("src")),
            (r = t("<img src=" + l + " style='position:absolute' />"));
          s.zWidth && r.css("width", s.zWidth),
            s.zHeight && r.css("height", s.zHeight),
            s.boxWidth && o.css("width", s.boxWidth),
            s.boxHeight && o.css("height", s.boxHeight),
            o.append(r),
            t(e).append(o);
        }
        t(e).off("mousemove"),
          t(e).on("mousemove", function (o) {
            console.log("move"),
              "inner" === s.position
                ? (function (o) {
                    var i = o || window.event,
                      s = t(e),
                      n = t(e).find(".magnify_box"),
                      l = n.find("img");
                    n.css({ display: "block" });
                    var r = i.clientX - n.outerWidth() / 2,
                      f = i.clientY - n.outerHeight() / 2,
                      p = s.outerWidth() - n.outerWidth(),
                      h = s.outerHeight() - n.outerHeight();
                    r <= 0 && (r = 0),
                      r >= p && (r = p - 2),
                      f <= 0 && (f = 0),
                      f >= h && (f = h - 2),
                      n.css({ left: r, top: f });
                    var c = l.outerWidth() / s.outerWidth(),
                      d = l.outerHeight() / s.outerHeight(),
                      u =
                        -i.clientX * c + 100 > 0
                          ? "0px"
                          : -i.clientX * c + 100 < 200 - l.outerWidth()
                          ? 200 - l.outerWidth() + "px"
                          : -i.clientX * c + 100 + "px",
                      g =
                        -i.clientY * d + 100 > 0
                          ? "0ox"
                          : -i.clientY * d + 100 < 200 - l.outerHeight()
                          ? 200 - l.outerHeight() + "px"
                          : -i.clientY * d + 100 + "px";
                    l.css({ left: u, top: g });
                  })(o)
                : (function (o) {
                    var i = o || window.event,
                      s = t(e).find(".imgzoombox"),
                      n = t(".imgzoombox1"),
                      l = n.find("img");
                    s.css("display", "block"), n.css("display", "block");
                    var r = i.clientX - s.outerWidth() / 2,
                      f = i.clientY - s.outerHeight() / 2,
                      p = t(e).outerWidth() - s.outerWidth(),
                      h = t(e).outerHeight() - s.outerHeight();
                    r <= 0 && (r = 0),
                      f <= 0 && (f = 0),
                      r >= p && (r = p),
                      f >= h && (f = h),
                      s.css({ left: r, top: f });
                    var c = s.offset().left / p,
                      d = s.offset().top / h;
                    n.scrollLeft((l.outerWidth() - n.outerWidth()) * c),
                      n.scrollTop((l.outerHeight() - n.outerHeight()) * d);
                  })(o);
          }),
          t(e).on("click", function () {});
      },
      function () {
        t(e).find(".magnify_box").remove(),
          t(e).find(".imgzoombox").remove(),
          t(".imgzoombox1").remove();
      }
    );
  };
})(jQuery);
